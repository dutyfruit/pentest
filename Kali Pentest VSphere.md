# Kali Pentest VSphere

### Infos de connexion

10.26.12.3 => téléchargement du client VSphere



10.26.12.199

username : amorvan

password: w1EDzbSfVv_aLnVD8Jc8



credentials machine:

login: root

mdp: à toi de te creuser la tête Aymeric, test d'application



@pplicationTest1ng--

## Additions invité VMWare

Pour installer les additions invités dans la Kali:

Une fois la machine lancée, et loggée sur une session, on va cliquer sur le menu "VM/invité/installer mettre à jour VMWare Tools"

Une fois ceci fait:

```cmd
cd /media/cdrom
cp <VMwareTools-XXXXXXXX.tar.gz> /tmp/
cd /tmp/
tar xzf <VMwareTools-XXXXXXXX.tar.gz>
cd vmwaretools-distrib/
./vmware-install.pl
reboot
```

Et voilà!



### Additions invité Virtualbox

```shell
apt update && apt dist-upgrade
apt install linux-image-amd64
apt install virtualbox-guest-x11
reboot
```

### Surcouche Archlinux

```shell
# Run https://blackarch.org/strap.sh as root and follow the instructions.

$ curl -O https://blackarch.org/strap.sh
# The SHA1 sum should match: 6b00f153bec70f61b58afb5ad7295d52b023850c

$ sha1sum strap.sh
# Set execute bit

$ chmod +x strap.sh
# Run strap.sh

$ sudo ./strap.sh
reboot
```
```shell
# To list all of the available tools, run

$ sudo pacman -Sgg | grep blackarch | cut -d' ' -f2 | sort -u
# To install all of the tools, run

$ sudo pacman -S blackarch
# To install a category of tools, run

$ sudo pacman -S blackarch-<category>
# To see the blackarch categories, run

$ sudo pacman -Sg | grep blackarch

# First, you must install blackman. If the BlackArch package repository is setup on your machine,
# you can install blackman like:

$ sudo pacman -S blackman
# Download, compile and install package:

$ sudo blackman -i <package>
# Download, compile and install whole category

$ sudo blackman -g <group>
# Download, compile and install all BlackArch tools

$ sudo blackman -a
# To list blackarch categories

$ blackman -l
# To list category tools

$ blackman -p <category>
```

### Outils tests d'intrusion - WebbAPP
Post installation, déploiement des paquets:

| outil                         | description                                                  | Installateur                                    | A installer de base         |
| ----------------------------- | ------------------------------------------------------------ | ----------------------------------------------- | --------------------------- |
| sqlmap                        | automatisation d'injection SQL                               | gestionnaire paquets                            | oui                         |
| outils réseau (gnome-nettool) | Pour ajouter les commandes ping, netstat, traceroute, port scans, lookup, finger, whois en mode GUI | gestionnaire paquets                            | non                         |
| maltego                       | Maltegoce is an intelligence gathering tool which aims to discover and collect data about the target (company or personal) and visualizes that collected data into graph for analysis. | ?                                               | oui                         |
| whatweb                       | WhatWeb is a website fingerprint utility. It identifies websites including content management systems (CMS), blogging platforms, statistic/analytic packages, JavaScript libraries, web servers, and embedded devices. WhatWeb has over 1700 plugins, each to recognize something different. WhatWeb also identifies version numbers, email addresses, account IDs, web framework modules, SQL errors, and more. | ?                                               | oui                         |
| nmap / zenmap                 | port scanner, ...                                            | gestionnaire paquets                            | oui                         |
| Vulscan                       | enhance nmap to a vulnerabilty scanner                       | gestionnaire paquets                            | non trouvé                  |
| dirbuster                     | Dirb is a tool to find hidden objects, files and directories on a website. Dirb works by launching a dictionary based attack against a web server and analyzing the response. | ?                                               | oui                         |
| nikto                         | Nikto is webserver and web application assessment tool to find potential security issues and vulnerabilities. Nikto scans for 6700 potentially dangerous files/programs. | gestionnaire paquets                            | oui                         |
| burpsuite                     | Burp Suite is a  collection of tools bundled into a single suite which performs security testing of web applications, from initial mapping and analysis of an application’s attack surface, through to finding and exploiting security vulnerabilities. The main features of Burpsuite is that it can function as an intercepting proxy (see image below). Burpsuite intercepts the traffic between a web browser and the web server. | ?                                               | oui                         |
| zaproxy                       | proxy & pentest tools                                        | gestionnaire paquets                            | oui                         |
| webhttrack                    | Httrack is a website / webpage cloner, from a penetration testing perspective, it is mainly used to create a fake website, or phising in attacker server. | gestionnaire paquets                            | oui                         |
| wpscan                        | WPScan is a WordPress CMS vulnerability scanner. To check what CMS is installed on a target website, you can use either ONLINE CMS Scanner, or using additional tools, “CMSMap”. | gestionnaire paquets                            | oui                         |
| cmsmap                        |                                                              | git clone https://github.com/Dionach/CMSmap.git | oui                         |
| hashcat                       | multithread advanced password recovery utility               | gestionnaire paquets                            | oui                         |
| findmyhash                    | crack different types of hashes using free online services   | gestionnaire paquets                            | oui                         |
| crunch                        | Crunch is a utility to create custom wordlists, where you can specify a standard character set or a character set you specify. crunch can generate all possible combinations and permutations. | ?                                               | oui                         |
| john / john-data /johnny      | John The Ripper is one of the most popular password testing and cracking programs as it combines a number of password crackers into one package, auto-detects password hash types, and includes a customization cracker | gestionnaire paquets                            | oui                         |
| hydra / hydra-gtk             | Hydra is the fastest network login cracker which supports numerous attack protocols. | gestionnaire paquets                            | oui                         |
| aircrack-ng                   | Aircrack-ng is a network software suite consisting of a scanner, packet sniffer, WEP and WPA/WPA2-PSK cracker and analysis tool for 802.11 wireless LANs. | gestionnaire paquets                            | non                         |
| fluxion                       | Fluxion is my favorite Evil Twin Attack tool. fluxion doesn’t perform bruteforce attack to break the key. Fluxion creates a open twin AP of the target (Wi-Fi) network. When someone tries to connect to that network a fake authentication page pops up asking for key. When victim enters the key, fluxion captures that key and checks whether the key is a valid password by matching the key and the handshake | ?                                               | non                         |
| set                           | The Social-Engineer Toolkit is an open-source penetration testing framework designed for Social-Engineering. SET has a number of custom attack vectors such as phishing, spear-phishing, malicious USB, mass mail, etc. | ?                                               | Oui                         |
| metasploit-framework          | Metasploit Framework initially was intended to be a maintainable framework which automates the process of exploiting rather than manually verifying it. Metasploit is a popular framework through history, it has rich modules aimed at a variety of targets such as Unix, BSD, Apple, Windows, Android, WebServers, etc. Below, is an example usage of metasploit, exploiting Windows OS using popular NSA Exploit EternalBlue and DoublePulsar. | gestionnaire paquets                            | oui                         |
| wireshark                     | Wireshark is a very popular network analyzer tool that’s most widely used in network security auditing. Wireshark uses display filters for general packet filtering. Here are some useful filters, including filters to grab captured password | gestionnaire paquets                            | oui                         |
| bettercap                     | BetterCAP is a powerful and portable utility to perform various types of MITM attacks against a network, manipulate HTTP, HTTPS and TCP traffic in realtime, sniff for credentials and much more. BetterCAP is similar in concept as ettercap, but, in my experience comparing both features, Bettercap WON. | gestionnaire paquets                            | oui                         |
| beef-xss                      | [BeEF](http://beefproject.com/) is a handy tool to assess "actual security posture of a target environment by using client-side attack vectors." Several professionals mentioned BeEF in passing, and noted that it was rather easy to use given the number of features and options the tool offers. You can learn more about BeEF [here](https://github.com/beefproject/beef/wiki). | ?                                               | oui                         |
| luckystrike                   | [Luckystrike](https://github.com/curi0usJack/luckystrike), from curi0usJack, is a generator of malicious Excel (.xls) and Word (.doc) documents. Luckystrike can work with standard shell commands, PowerShell scripts, and EXEs. Additional information and usage details are available [here](https://www.shellntel.com/blog/2016/9/13/luckystrike-a-database-backed-evil-macro-generator). | ?                                               | pas trouvé                  |
| immunity inc. debugger        | The [Immunity Debugger](https://www.immunityinc.com/products/debugger/) is a tool that will help security professionals write exploits, analyze malware, and reverse engineer binaries. There are a ton of features, but the two writeups that best cover a majority of them are an [overview by Igor Novkovic](https://sgros-students.blogspot.ca/2014/05/immunity-debugger-basics-part-1.html) and a [SANS Reading Room paper on basic reverse engineering](https://www.sans.org/reading-room/whitepapers/malicious/basic-reverse-engineering-immunity-debugger-36982). If reversing or exploit writing are in your wheelhouse, this tool is likely something you're familiar with already, if it isn't – it's worth a look. | ?                                               | pas trouvé                  |
| W3af                          | W3af is a Web Application Attack and Audit Framework.        | ?                                               | pas trouvé                  |
| apt2                          | Automated penetration testing toolkit                        |                                                 | oui                         |
| Nessus                        | Nessus is also a scanner and it needs to be watched out for. It is one of the most robust vulnerability identifier tools available. It specializes in compliance checks, Sensitive data searches, IPs scan, website scanning etc. and aids in finding the ‘weak-spots’. | ?                                               | Payant (demo 7 jours)       |
| weevely                       | shell payloads                                               | ?                                               | oui                         |
| dradis                        | Dradis is an open source framework (a web application) that helps with maintaining the information that can be shared among the participants of a pen-test. The information collected helps to understand what is done and what needs to be done. It achieves this purpose by the means of plugins to read and collect data from network scanning tools like Nmap, w3af, Nessus, Burp Suite, Nikto and much more.  It has a GUI interface, works on Linux, Apple Mac OS X and Microsoft Windows. It is an open source and can be found at the below page. | ?                                               | oui                         |
| bettercap                     | A network and host analysis tool that provides sniffing and protocol dissection among other things. | gestionnaire paquets                            | oui                         |
| openvas                       | Stands for Open Vulnerabilities Assessment System. Well, the name says it all | gestionnaire paquets                            | oui                         |
| cherrytree                    | prise de notes héirarchisées                                 | gestionnaire paquets                            | pas nécessaire grâce à Atom |
| fimap                         | fimap is a little python tool which can find, prepare, audit, exploit and even google automaticly for local and remote file inclusion bugs in webapps. fimap should be something like sqlmap just for LFI/RFI bugs instead of sql injection. It’s currently under heavy development but it’s usable. | ?                                               | oui                         |
| arachni                       | Web application Security Scanner Framework                   | apt                                             | oui                         |
| automater                     | IP and URL analysis tool                                     | apt                                             | oui                         |
| bbqsql                        | outil d'exploitation d'injection SQL                         | apt                                             | oui                         |
| blindelephant                 | Generic web app fingerprinter                                | apt                                             | oui                         |
| cadaver                       | Client webdav en cli                                         | apt                                             | oui                         |
| clusterd                      | application server attack toolkit                            | apt                                             | oui                         |
| cookie-cadger                 | cookie auditing tool for wired and wireless networks         | apt                                             | oui                         |
| davtest                       | testing tool for webDAV servers                              | apt                                             | oui                         |
| dirb                          | URL bruteforcing tool                                        | apt                                             | oui                         |
| dotdotpwn                     | directory traversal fuzzer                                   | apt                                             | oui                         |
| eyewitness                    | rapid web app triage tool                                    | apt                                             | oui                         |
| ftester                       | The Firewall Tester (FTester) is a tool designed for testing firewall filtering policies and Intrusion Detection System (IDS) capabilities. | apt                                             | oui                         |
| funkload                      | Web testing tool                                             | apt                                             | oui                         |
| golismero                     | Web app mapper                                               | apt                                             | oui                         |
| grabber                       | web app vulnerability scanner                                | apt                                             | oui                         |
| hexorbase                     | multiple database management and audit application           | apt                                             | oui                         |
| http-tunnel                   | tunneling software to tunnel through restrictive HTTP proxies | apt                                             | oui                         |
| httprint                      | Web server fingerprinting tool                               | apt                                             | oui                         |
| mimikatz                      | uses admin rights in windows to display passwords in plaintext | apt                                             | oui                         |
| jboss-autopwn                 | JBoss script for obtaining remote shell access               | apt                                             | oui                         |
| jd-gui                        | Gui java .class decompiler                                   | apt                                             | oui                         |
| joomscan                      | OWASP joomla vuln scanner project                            | apt                                             | oui                         |
| jsql-injection                | Java tool for automatic database injection                   | apt                                             | oui                         |
| laudanum                      | Collection of injectable web files                           | apt                                             | oui                         |
| ldb                           | load balancer detector                                       | apt                                             | oui                         |
| maltego / maltego-teeth       | Intelligence and forensics app / set of offensive maltego transforms | apt                                             | oui                         |
| medusa                        | Casseur d'identifiant rapide, parallèle, modulaire et en brute force | apt                                             | oui                         |
| mitmproxy                     | SSL-capable mitm HTTP proxy                                  | apt                                             | oui                         |
| ncrack                        | High-speed network authentication cracking tool              | apt                                             | oui                         |
| oscanner                      | Orcacle assessment framework                                 | apt                                             | oui                         |
| owasp-mantra-ff               | Web application security testing framework built on top of firefox | apt                                             | oui                         |
| padbuster                     | Script for performing Padding Oracle Attacks                 | apt                                             | oui                         |
| paros                         | web application proxy                                        | apt                                             | oui                         |
| patator                       | multi-purpose brute-forcer                                   | apt                                             | oui                         |
| plecost                       | wordpress fingerprinting tool                                | apt                                             | oui                         |
| powerfuzzer                   | highly automated and fully customizable web fuzzer           | apt                                             | oui                         |
| proxychains4                  | redirect connections through socks/http proxies              | apt                                             | oui                         |
| proxystrike                   | active web application proxy                                 | apt                                             | oui                         |
| proxytunnel                   | Create tcp tunnels through HTTPS proxies, for using with SSH | apt                                             | oui                         |
| recon-ng                      | Web reconnaissance framework written in Python               | apt                                             | oui                         |
| skipfish                      | fully automated, active web application security reconnaissance tool | apt                                             | oui                         |
| sqldict                       | dictionary attack tool for SQL server                        | apt                                             | oui                         |
| sqlninja                      | SQL server injection and takeover tool                       | apt                                             | oui                         |
| sqlsus                        | MySQL injection tool                                         | apt                                             | oui                         |
| sslcaudit                     | Tests SSL/TLS clients susceptibility to MITM attacks         | apt                                             | oui                         |
| ssldump                       | SSLv3/TLS network protocol analyzer                          | apt                                             | oui                         |
| sslscan                       | Fast SSL scanner                                             | apt                                             | oui                         |
| sslsniff                      | SSL/TLS mitm attack tool                                     | apt                                             | oui                         |
| sslsplit                      | transparent and scalable SSL/TLS interception                | apt                                             | oui                         |
| sslyze                        | fast and full-featured SSL scanner                           | apt                                             | oui                         |
| tlssled                       | Evaluates the security of a target SSL/TLS (HTTPS) server    | apt                                             | oui                         |
| ua-tester                     | User agent string tester                                     | apt                                             | oui                         |
| uniscan                       | LFI, RFI and RCE vuln scanner                                | apt                                             | oui                         |
| vega                          | platform to test the security of web apps                    | apt                                             | oui                         |
| wapiti                        | analyseur de vuln d'applications web                         | apt                                             | oui                         |
| webacoo                       | Web backdoor cookie script kit                               | apt                                             | oui                         |
| webhandler                    | Bash simulator to control a server using PHP system functions | apt                                             | oui                         |
| webscarab                     | web application review tool                                  | apt                                             | oui                         |
| webshells                     | collection of webshells                                      | apt                                             | oui                         |
| websploit                     | web exploitation framework                                   | apt                                             | oui                         |
| wfuzz                         | web application bruteforcer                                  | apt                                             | oui                         |
| whatweb                       | analyseur web de nouvelle génération                         | apt                                             | oui                         |
| pompem                        | exploit and vuln finder                                      | apt                                             | oui                         |
| xsser                         | XSS testing framework                                        | apt                                             | oui                         |

### Outils tests d'intrusion - FORENSIC - CTF - STEGANO - RESEAU - REVERSE
| volatility                       | Forensic Tool                   | pacman -S                                             | oui                         |


### Installation nouvelle machine Debian d'Intrusion

- Installation du système

- Installation des additions invités: 

  - On commence par installer le CD des additions invités VirtualBox dans le menu

  - ```shell
    apt update && apt dist-upgrade -y
    apt install linux-headers-4.9.0-6-amd64 module-assistant build-essential
    m-a prepare
    cd /media/cdrom
    cp VBoxLinuxAdditions..... /tmp/
    cd /tmp/
    chmod +x VBoxLinuxAdditions....
    ./VBoxLinuxAdditions....
    ```

- On ajoute les repo Kali:

  - ```shell
    nano /etc/apt/sources.list
    #puis ajouter les repo dans le fichier:
    deb http://http.kali.org/kali kali-rolling main contrib non-free
    apt update
    #si les clés ne fonctionnent pas
    wget -q -O - https://archive.kali.org/archive-key.asc  | apt-key add
    apt update


    //Après l'ajout des repos kali il est possible que les additions invités ne soient plus //à jour, il faudra donc faire:
    apt install linux-image-amd64
    apt install virtualbox-guest-x11
    reboot
    ```

- On commence par installer les paquets indispensables:

  - ```shell
    apt install sqlmap maltego whatweb nmap zenmap dirbuster nikto burpsuite zaproxy webhttrack wpscan cmsmap hashcat findmyhash crunch john john-data johnny hydra hydra-gtk metasploit-framework wireshark bettercap beef-xss apt2 weevely dradis bettercap openvas fimap arachni automater bbqsql blindelephant cadaver clusterd cookie-cadger davtest dirb dotdotpwn eyewitness ftester funkload golismero grabber hexorbase http-tunnel httprint mimikatz jboss-autopwn jd-gui joomscan jsql-injection laudanum ldb maltego-teeth medusa mitmproxy ncrack oscanner owasp-mantra-ff padbuster paros patator plecost powerfuzzer proxychains4 proxystrike proxytunnel recon-ng skipfish sqldict sqlninja sqlsus sslcaudit ssldump sslscan ssldump sslscan sslsniff sslsplit sslyze tlssled ua-tester uniscan vega wapiti webacoo webhandler webscarab webshells websploit wfuzz pompem xsser set 
    ```

- Puis quelques outils non dispo via les repos:

  - Atom (téléchargement via leur site)

    - ```shell
      https://atom.io/download/deb
      cd /home/user/Téléchargements
      dpkg -i atom-amd64.deb
      ```

  - Firefox developper edition (via leur site aussi)

    - Ajout des plugins FF:

| plugin                                                       | explication                                                  | à installer |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ----------- |
| Web developer tools                                          | The Web Developer extension adds various web developer tools to the browser. | oui         |
| Foxy proxy basic                                             | FoxyProxy Basic is a simple on/off proxy switcher. More advanced features and configuration options are offered by FoxyProxy Standard. | oui         |
| Full web page screenshots                                    | FireShot makes full web page screenshots.                    | oui         |
| wappalyzer                                                   | Wappalyzer est une extension Firefox qui identifie les logiciels utilisés par les sites web. | oui         |
| user-agent switcher                                          | Quickly and easily switch between popular user-agent strings. | oui         |
| jsonview                                                     | Afficher les documents JSON dans le navigateur.              | oui         |
| hackbar                                                      | A HackBar for new firefox (Firefox Quantum). This addon is written in webextension and alternatives to the XUL version of original Hackbar. | oui         |
| header editor                                                | Manage browser's requests, include modify the request headers and response headers, redirect requests, cancel requests | oui         |
| osvdb                                                        | Open Source Vulnerability Database Search                    | oui         |
| offensive security exploit database / offsec exploit-db search | his plugin lets you search on Offsec Exploit archive - [http://exploit-db.com](https://outgoing.prod.mozaws.net/v1/2abd2ffcaa8d9ec2c19444dad4fd5fbf6edaaaf71fbd3e055a2e736ac348b301/http%3A//exploit-db.com). Offsec Exploit archive, also known as [Explo.it](https://outgoing.prod.mozaws.net/v1/17ba979d3ddd345fa4ac13f3a46da669569d44f948e8bcdf355af1fc9e58f91b/http%3A//Explo.it), is the replacement of Milw0rm archive. | oui         |
| whois check                                                  | This addon will check if domain of opened url, is registered within last 12 months.And will notify the user with an icon besides url. By clicking the icon, user can proceed or stop & go to duckduckgo. | oui         |
| HTTP header live                                             | Displays the HTTP header. Edit it and send it.               | oui         |
| secapps                                                      | This extension will enhance your browser environment with several purpose-built APIs designed for security testing and used by several information security applications, such as a Scanner, Fuzzer and request auditing tool, hosted by [secapps.com](https://outgoing.prod.mozaws.net/v1/426ccc3202f0b44a8e5a2a6cf3885568bb6fff4fa027cce9eb3cf94f6a950362/http%3A//secapps.com). | oui         |
| packet storm search plugin                                   | This plugin lets you search on Packet Storm - www.packetstormsecurity.org - database. Packet Storm offers an abundant resource of up-to-date and historical security tools, exploits, and advisories. | oui         |

- Et un petit tweak graphique!

  - Ajout du thème arc-theme et des icônes numix-icon-theme

  ​



